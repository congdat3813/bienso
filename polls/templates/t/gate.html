<!DOCTYPE html>
<html lang="en" class="h-100">
  {% load static %}
  <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <title>DCVT Security</title>

        <link rel="canonical" href="https://getbootstrap.com/docs/5.1/examples/cover/">

        <link href="{%static 'css/bootstrap.min.css' %}" rel="stylesheet">

        <style>
            .bd-placeholder-img {
                font-size: 1.125rem;
                text-anchor: middle;
                -webkit-user-select: none;
                -moz-user-select: none;
                user-select: none;
            }
        
             @media (min-width: 768px) {
                .bd-placeholder-img-lg {
                  font-size: 3.5rem;
                }
            }
        </style>
        <link href="{%static 'css/cover.css'%}" rel="stylesheet">
  </head>
  <body>
    
    <div class="d-flex h-100 text-center text-white bg-dark">
      <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
        <header class="mb-auto">
          <div>
            <h3 class="float-md-start mb-0">DCVT</h3>
            <nav class="nav nav-masthead justify-content-center float-md-end">
              <a class="nav-link active" aria-current="page" href="../../polls/home">Homepage</a>
              <a class="nav-link" href="../../polls/gate">Cổng kiểm soát</a>
              <a class="nav-link" href="../../polls/cus">Thông tin khách hàng</a>
              <a class="nav-link" href="../../polls/history">Lịch sử</a>
            </nav>
          </div>
        </header>
      </div>
    </div>
    
    <div class="container-fluid">
      <main class="col-md-9 ms-sm-auto col-lg-12 px-md-4">
          <div class="container py-4">
            <div class="row align-items-md-stretch">
              <div class="col-md-6">
                <div class="h-100 p-5 bg-light border rounded-3">
                  <h2>Cổng vào</h2>
                  <div class="container">
                    <img src="{{ item3.img.url }}" width="400" height="350";/>
                  </div>
                  <h5>Biển kiểm soát: {{ file_content }}</h5>
                  <h5>Tên người dùng: {{ item1.dvname }}</h5>
                  <button class="btn btn-outline-secondary" onclick="Open({{ item1.id }})" >Mở</button>
                  <button class="btn btn-outline-secondary" onclick="Close({{ item1.id }})" >Đóng</button>
                </div>
              </div>
              <div class="col-md-6">
                <div class="h-100 p-5 bg-light border rounded-3">
                  <h2>Cổng ra</h2>
                  <div class="container">
                    <img src="{{ item3.img.url }}" width="400" height="350";/>
                  </div>
                  <h5>Biển kiểm soát: {{ file_content }}</h5>
                  <h5>Tên người dùng: {{ item2.dvname }}</h5>
                  <button class="btn btn-outline-secondary" onclick="Open({{ item2.id }})" >Mở</button>
                  <button class="btn btn-outline-secondary" onclick="Close({{ item2.id }})">Đóng</button>
                </div>
              </div>
            </div>
          </div>
      </main>
    </div>

  </body>
  <script>
    function Open(id) {
        var url = '/polls/Open/';
        fetch(url, {
            method: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}',
            },
            body: JSON.stringify(id)
        }).then(res => {
            return res.json();
        }
        ).then((data) => {
            if (data == true) {
              }
              else { alert(data + ' Out of material!!!') }
        });
    }
    function Close(id) {
        var url = '/polls/Close/';
        fetch(url, {
            method: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}',
            },
            body: JSON.stringify(id)
        }).then(res => {
            return res.json();
        }
        ).then((data) => {
            if (data == true) {
              }
              else { alert(data + ' Out of material!!!') }
        });
    }
  </script>
</html>
